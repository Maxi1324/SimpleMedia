{"ast":null,"code":"/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport * as React from \"react\";\nimport { HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT, HOTKEYS_WARN_DECORATOR_NO_METHOD } from \"../../common/errors\";\nimport { getDisplayName, isFunction } from \"../../common/utils\";\nimport { HotkeyScope, HotkeysEvents } from \"./hotkeysEvents\";\n/** @deprecated use `useHotkeys` hook or `<HotkeysTarget2>` component */\n\nexport function HotkeysTarget(WrappedComponent) {\n  var _a;\n\n  if (!isFunction(WrappedComponent.prototype.renderHotkeys)) {\n    console.warn(HOTKEYS_WARN_DECORATOR_NO_METHOD);\n  }\n\n  return _a =\n  /** @class */\n  function (_super) {\n    __extends(HotkeysTargetClass, _super);\n\n    function HotkeysTargetClass() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n      /** @internal */\n\n\n      _this.globalHotkeysEvents = new HotkeysEvents(HotkeyScope.GLOBAL);\n      /** @internal */\n\n      _this.localHotkeysEvents = new HotkeysEvents(HotkeyScope.LOCAL);\n      return _this;\n    }\n\n    HotkeysTargetClass.prototype.componentDidMount = function () {\n      if (_super.prototype.componentDidMount != null) {\n        _super.prototype.componentDidMount.call(this);\n      } // attach global key event listeners\n\n\n      document.addEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n      document.addEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n    };\n\n    HotkeysTargetClass.prototype.componentWillUnmount = function () {\n      var _a;\n\n      (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\n      document.removeEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n      document.removeEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n      this.globalHotkeysEvents.clear();\n      this.localHotkeysEvents.clear();\n    };\n\n    HotkeysTargetClass.prototype.render = function () {\n      var _this = this;\n\n      var element = _super.prototype.render.call(this);\n\n      if (element == null) {\n        // always return `element` in case caller is distinguishing between `null` and `undefined`\n        return element;\n      }\n\n      if (!React.isValidElement(element)) {\n        console.warn(HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n        return element;\n      }\n\n      if (isFunction(this.renderHotkeys)) {\n        var hotkeys = this.renderHotkeys();\n\n        if (this.localHotkeysEvents) {\n          this.localHotkeysEvents.setHotkeys(hotkeys.props);\n        }\n\n        if (this.globalHotkeysEvents) {\n          this.globalHotkeysEvents.setHotkeys(hotkeys.props);\n        }\n\n        if (this.localHotkeysEvents.count() > 0) {\n          var tabIndex = hotkeys.props.tabIndex === undefined ? 0 : hotkeys.props.tabIndex;\n          var _a = element.props,\n              existingKeyDown_1 = _a.onKeyDown,\n              existingKeyUp_1 = _a.onKeyUp;\n\n          var handleKeyDownWrapper = function (e) {\n            _this.localHotkeysEvents.handleKeyDown(e.nativeEvent);\n\n            existingKeyDown_1 === null || existingKeyDown_1 === void 0 ? void 0 : existingKeyDown_1(e);\n          };\n\n          var handleKeyUpWrapper = function (e) {\n            _this.localHotkeysEvents.handleKeyUp(e.nativeEvent);\n\n            existingKeyUp_1 === null || existingKeyUp_1 === void 0 ? void 0 : existingKeyUp_1(e);\n          };\n\n          return React.cloneElement(element, {\n            onKeyDown: handleKeyDownWrapper,\n            onKeyUp: handleKeyUpWrapper,\n            tabIndex: tabIndex\n          });\n        }\n      }\n\n      return element;\n    };\n\n    return HotkeysTargetClass;\n  }(WrappedComponent), _a.displayName = \"HotkeysTarget(\" + getDisplayName(WrappedComponent) + \")\", _a;\n}","map":{"version":3,"sources":["../../../../src/components/hotkeys/hotkeysTarget.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport * as React from \"react\";\nimport { HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT, HOTKEYS_WARN_DECORATOR_NO_METHOD } from \"../../common/errors\";\nimport { getDisplayName, isFunction } from \"../../common/utils\";\nimport { HotkeyScope, HotkeysEvents } from \"./hotkeysEvents\";\n/** @deprecated use `useHotkeys` hook or `<HotkeysTarget2>` component */\nexport function HotkeysTarget(WrappedComponent) {\n    var _a;\n    if (!isFunction(WrappedComponent.prototype.renderHotkeys)) {\n        console.warn(HOTKEYS_WARN_DECORATOR_NO_METHOD);\n    }\n    return _a = /** @class */ (function (_super) {\n            __extends(HotkeysTargetClass, _super);\n            function HotkeysTargetClass() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                /** @internal */\n                _this.globalHotkeysEvents = new HotkeysEvents(HotkeyScope.GLOBAL);\n                /** @internal */\n                _this.localHotkeysEvents = new HotkeysEvents(HotkeyScope.LOCAL);\n                return _this;\n            }\n            HotkeysTargetClass.prototype.componentDidMount = function () {\n                if (_super.prototype.componentDidMount != null) {\n                    _super.prototype.componentDidMount.call(this);\n                }\n                // attach global key event listeners\n                document.addEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n                document.addEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n            };\n            HotkeysTargetClass.prototype.componentWillUnmount = function () {\n                var _a;\n                (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\n                document.removeEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n                document.removeEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n                this.globalHotkeysEvents.clear();\n                this.localHotkeysEvents.clear();\n            };\n            HotkeysTargetClass.prototype.render = function () {\n                var _this = this;\n                var element = _super.prototype.render.call(this);\n                if (element == null) {\n                    // always return `element` in case caller is distinguishing between `null` and `undefined`\n                    return element;\n                }\n                if (!React.isValidElement(element)) {\n                    console.warn(HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n                    return element;\n                }\n                if (isFunction(this.renderHotkeys)) {\n                    var hotkeys = this.renderHotkeys();\n                    if (this.localHotkeysEvents) {\n                        this.localHotkeysEvents.setHotkeys(hotkeys.props);\n                    }\n                    if (this.globalHotkeysEvents) {\n                        this.globalHotkeysEvents.setHotkeys(hotkeys.props);\n                    }\n                    if (this.localHotkeysEvents.count() > 0) {\n                        var tabIndex = hotkeys.props.tabIndex === undefined ? 0 : hotkeys.props.tabIndex;\n                        var _a = element.props, existingKeyDown_1 = _a.onKeyDown, existingKeyUp_1 = _a.onKeyUp;\n                        var handleKeyDownWrapper = function (e) {\n                            _this.localHotkeysEvents.handleKeyDown(e.nativeEvent);\n                            existingKeyDown_1 === null || existingKeyDown_1 === void 0 ? void 0 : existingKeyDown_1(e);\n                        };\n                        var handleKeyUpWrapper = function (e) {\n                            _this.localHotkeysEvents.handleKeyUp(e.nativeEvent);\n                            existingKeyUp_1 === null || existingKeyUp_1 === void 0 ? void 0 : existingKeyUp_1(e);\n                        };\n                        return React.cloneElement(element, {\n                            onKeyDown: handleKeyDownWrapper,\n                            onKeyUp: handleKeyUpWrapper,\n                            tabIndex: tabIndex,\n                        });\n                    }\n                }\n                return element;\n            };\n            return HotkeysTargetClass;\n        }(WrappedComponent)),\n        _a.displayName = \"HotkeysTarget(\" + getDisplayName(WrappedComponent) + \")\",\n        _a;\n}\n//# sourceMappingURL=hotkeysTarget.js.map"]},"metadata":{},"sourceType":"module"}