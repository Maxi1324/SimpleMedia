{"ast":null,"code":"/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT, CONTEXTMENU_WARN_DECORATOR_NO_METHOD } from \"../../common/errors\";\nimport { getDisplayName, isFunction } from \"../../common/utils\";\nimport { isDarkTheme } from \"../../common/utils/isDarkTheme\";\nimport * as ContextMenu from \"./contextMenu\";\n/** @deprecated use ContextMenu2 */\n\nexport function ContextMenuTarget(WrappedComponent) {\n  var _a;\n\n  if (!isFunction(WrappedComponent.prototype.renderContextMenu)) {\n    console.warn(CONTEXTMENU_WARN_DECORATOR_NO_METHOD);\n  }\n\n  return _a =\n  /** @class */\n  function (_super) {\n    __extends(ContextMenuTargetClass, _super);\n\n    function ContextMenuTargetClass() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    ContextMenuTargetClass.prototype.render = function () {\n      var _this = this;\n\n      var element = _super.prototype.render.call(this);\n\n      if (element == null) {\n        // always return `element` in case caller is distinguishing between `null` and `undefined`\n        return element;\n      }\n\n      if (!React.isValidElement(element)) {\n        console.warn(CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n        return element;\n      }\n\n      var oldOnContextMenu = element.props.onContextMenu;\n\n      var onContextMenu = function (e) {\n        // support nested menus (inner menu target would have called preventDefault())\n        if (e.defaultPrevented) {\n          return;\n        }\n\n        if (isFunction(_this.renderContextMenu)) {\n          var menu = _this.renderContextMenu(e);\n\n          if (menu != null) {\n            // HACKHACK: see https://github.com/palantir/blueprint/issues/3979\n\n            /* eslint-disable-next-line react/no-find-dom-node */\n            var darkTheme = isDarkTheme(ReactDOM.findDOMNode(_this));\n            e.preventDefault();\n            ContextMenu.show(menu, {\n              left: e.clientX,\n              top: e.clientY\n            }, _this.onContextMenuClose, darkTheme);\n          }\n        }\n\n        oldOnContextMenu === null || oldOnContextMenu === void 0 ? void 0 : oldOnContextMenu(e);\n      };\n\n      return React.cloneElement(element, {\n        onContextMenu: onContextMenu\n      });\n    };\n\n    return ContextMenuTargetClass;\n  }(WrappedComponent), _a.displayName = \"ContextMenuTarget(\" + getDisplayName(WrappedComponent) + \")\", _a;\n}","map":{"version":3,"sources":["../../../../src/components/context-menu/contextMenuTarget.tsx"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;AAcG;;AAEH,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAK,QAAZ,MAA0B,WAA1B;AAGA,SACI,8CADJ,EAEI,oCAFJ,QAGO,qBAHP;AAIA,SAAS,cAAT,EAAyB,UAAzB,QAA2C,oBAA3C;AACA,SAAS,WAAT,QAA4B,gCAA5B;AACA,OAAO,KAAK,WAAZ,MAA6B,eAA7B;AAQA;;AACA,OAAM,SAAU,iBAAV,CAAiF,gBAAjF,EAAoG;;;AACtG,MAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,SAAjB,CAA2B,iBAA5B,CAAf,EAA+D;AAC3D,IAAA,OAAO,CAAC,IAAR,CAAa,oCAAb;AACH;;AAED,SAAA,EAAA;AAAA;AAAA,YAAA,MAAA,EAAA;AAA4C,IAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;;AAArC,aAAA,sBAAA,GAAA;;AAsCN;;AAnCU,IAAA,sBAAA,CAAA,SAAA,CAAA,MAAA,GAAP,YAAA;AAAA,UAAA,KAAA,GAAA,IAAA;;AACI,UAAM,OAAO,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAhB;;AAEA,UAAI,OAAO,IAAI,IAAf,EAAqB;AACjB;AACA,eAAO,OAAP;AACH;;AAED,UAAI,CAAC,KAAK,CAAC,cAAN,CAA0B,OAA1B,CAAL,EAAyC;AACrC,QAAA,OAAO,CAAC,IAAR,CAAa,8CAAb;AACA,eAAO,OAAP;AACH;;AACD,UAAM,gBAAgB,GAAG,OAAO,CAAC,KAAR,CAAc,aAAvC;;AACA,UAAM,aAAa,GAAG,UAAC,CAAD,EAAiC;AACnD;AACA,YAAI,CAAC,CAAC,gBAAN,EAAwB;AACpB;AACH;;AAED,YAAI,UAAU,CAAC,KAAI,CAAC,iBAAN,CAAd,EAAwC;AACpC,cAAM,IAAI,GAAG,KAAI,CAAC,iBAAL,CAAuB,CAAvB,CAAb;;AACA,cAAI,IAAI,IAAI,IAAZ,EAAkB;AACd;;AACA;AACA,gBAAM,SAAS,GAAG,WAAW,CAAC,QAAQ,CAAC,WAAT,CAAqB,KAArB,CAAD,CAA7B;AACA,YAAA,CAAC,CAAC,cAAF;AACA,YAAA,WAAW,CAAC,IAAZ,CAAiB,IAAjB,EAAuB;AAAE,cAAA,IAAI,EAAE,CAAC,CAAC,OAAV;AAAmB,cAAA,GAAG,EAAE,CAAC,CAAC;AAA1B,aAAvB,EAA4D,KAAI,CAAC,kBAAjE,EAAqF,SAArF;AACH;AACJ;;AAED,QAAA,gBAAgB,KAAA,IAAhB,IAAA,gBAAgB,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAA,gBAAgB,CAAG,CAAH,CAAhB;AACH,OAlBD;;AAoBA,aAAO,KAAK,CAAC,YAAN,CAAmB,OAAnB,EAA4B;AAAE,QAAA,aAAa,EAAA;AAAf,OAA5B,CAAP;AACH,KAlCM;;AAmCX,WAAA,sBAAA;AAAC,GAtCD,CAA4C,gBAA5C,CAAA,EACkB,EAAA,CAAA,WAAA,GAAc,uBAAqB,cAAc,CAAC,gBAAD,CAAnC,GAAqD,GADrF,EAsCE,EAtCF;AAuCH","sourceRoot":"","sourcesContent":["/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT, CONTEXTMENU_WARN_DECORATOR_NO_METHOD, } from \"../../common/errors\";\nimport { getDisplayName, isFunction } from \"../../common/utils\";\nimport { isDarkTheme } from \"../../common/utils/isDarkTheme\";\nimport * as ContextMenu from \"./contextMenu\";\n/** @deprecated use ContextMenu2 */\nexport function ContextMenuTarget(WrappedComponent) {\n    var _a;\n    if (!isFunction(WrappedComponent.prototype.renderContextMenu)) {\n        console.warn(CONTEXTMENU_WARN_DECORATOR_NO_METHOD);\n    }\n    return _a = /** @class */ (function (_super) {\n            __extends(ContextMenuTargetClass, _super);\n            function ContextMenuTargetClass() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ContextMenuTargetClass.prototype.render = function () {\n                var _this = this;\n                var element = _super.prototype.render.call(this);\n                if (element == null) {\n                    // always return `element` in case caller is distinguishing between `null` and `undefined`\n                    return element;\n                }\n                if (!React.isValidElement(element)) {\n                    console.warn(CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n                    return element;\n                }\n                var oldOnContextMenu = element.props.onContextMenu;\n                var onContextMenu = function (e) {\n                    // support nested menus (inner menu target would have called preventDefault())\n                    if (e.defaultPrevented) {\n                        return;\n                    }\n                    if (isFunction(_this.renderContextMenu)) {\n                        var menu = _this.renderContextMenu(e);\n                        if (menu != null) {\n                            // HACKHACK: see https://github.com/palantir/blueprint/issues/3979\n                            /* eslint-disable-next-line react/no-find-dom-node */\n                            var darkTheme = isDarkTheme(ReactDOM.findDOMNode(_this));\n                            e.preventDefault();\n                            ContextMenu.show(menu, { left: e.clientX, top: e.clientY }, _this.onContextMenuClose, darkTheme);\n                        }\n                    }\n                    oldOnContextMenu === null || oldOnContextMenu === void 0 ? void 0 : oldOnContextMenu(e);\n                };\n                return React.cloneElement(element, { onContextMenu: onContextMenu });\n            };\n            return ContextMenuTargetClass;\n        }(WrappedComponent)),\n        _a.displayName = \"ContextMenuTarget(\" + getDisplayName(WrappedComponent) + \")\",\n        _a;\n}\n//# sourceMappingURL=contextMenuTarget.js.map"]},"metadata":{},"sourceType":"module"}