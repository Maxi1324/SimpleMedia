{"ast":null,"code":"/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __decorate, __extends } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { getPositionIgnoreAngles, isPositionHorizontal } from \"../../common/position\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon } from \"../icon/icon\";\nimport { Overlay } from \"../overlay/overlay\";\n\nvar Drawer =\n/** @class */\nfunction (_super) {\n  __extends(Drawer, _super);\n\n  function Drawer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleOpening = function (node) {\n      var _a, _b;\n\n      _this.lastActiveElementBeforeOpened = document.activeElement;\n      (_b = (_a = _this.props).onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    _this.handleClosed = function (node) {\n      var _a, _b;\n\n      if (_this.lastActiveElementBeforeOpened instanceof HTMLElement) {\n        _this.lastActiveElementBeforeOpened.focus();\n      }\n\n      (_b = (_a = _this.props).onClosed) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    return _this;\n  }\n\n  Drawer.prototype.render = function () {\n    var _a, _b;\n\n    var _c; // eslint-disable-next-line deprecation/deprecation\n\n\n    var _d = this.props,\n        size = _d.size,\n        style = _d.style,\n        position = _d.position,\n        vertical = _d.vertical;\n    var realPosition = position ? getPositionIgnoreAngles(position) : undefined;\n    var classes = classNames(Classes.DRAWER, (_a = {}, _a[Classes.VERTICAL] = !realPosition && vertical, _a[(_c = Classes.positionClass(realPosition)) !== null && _c !== void 0 ? _c : \"\"] = true, _a), this.props.className);\n    var styleProp = size == null ? style : __assign(__assign({}, style), (_b = {}, _b[(realPosition ? isPositionHorizontal(realPosition) : vertical) ? \"height\" : \"width\"] = size, _b));\n    return React.createElement(Overlay, __assign({}, this.props, {\n      className: Classes.OVERLAY_CONTAINER,\n      onOpening: this.handleOpening,\n      onClosed: this.handleClosed\n    }), React.createElement(\"div\", {\n      className: classes,\n      style: styleProp\n    }, this.maybeRenderHeader(), this.props.children));\n  };\n\n  Drawer.prototype.validateProps = function (props) {\n    if (props.title == null) {\n      if (props.icon != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n      }\n\n      if (props.isCloseButtonShown != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n      }\n    }\n\n    if (props.position != null) {\n      // eslint-disable-next-line deprecation/deprecation\n      if (props.vertical) {\n        console.warn(Errors.DRAWER_VERTICAL_IS_IGNORED);\n      }\n\n      if (props.position !== getPositionIgnoreAngles(props.position)) {\n        console.warn(Errors.DRAWER_ANGLE_POSITIONS_ARE_CASTED);\n      }\n    }\n  };\n\n  Drawer.prototype.maybeRenderCloseButton = function () {\n    // `isCloseButtonShown` can't be defaulted through default props because of props validation\n    // so this check actually defaults it to true (fails only if directly set to false)\n    if (this.props.isCloseButtonShown !== false) {\n      return React.createElement(Button, {\n        \"aria-label\": \"Close\",\n        className: Classes.DIALOG_CLOSE_BUTTON,\n        icon: React.createElement(Icon, {\n          icon: \"small-cross\",\n          iconSize: Icon.SIZE_LARGE\n        }),\n        minimal: true,\n        onClick: this.props.onClose\n      });\n    } else {\n      return null;\n    }\n  };\n\n  Drawer.prototype.maybeRenderHeader = function () {\n    var _a = this.props,\n        icon = _a.icon,\n        title = _a.title;\n\n    if (title == null) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: Classes.DRAWER_HEADER\n    }, React.createElement(Icon, {\n      icon: icon,\n      iconSize: Icon.SIZE_LARGE\n    }), React.createElement(H4, null, title), this.maybeRenderCloseButton());\n  };\n\n  Drawer.displayName = DISPLAYNAME_PREFIX + \".Drawer\";\n  Drawer.defaultProps = {\n    canOutsideClickClose: true,\n    isOpen: false,\n    style: {},\n    vertical: false\n  };\n  Drawer.SIZE_SMALL = \"360px\";\n  Drawer.SIZE_STANDARD = \"50%\";\n  Drawer.SIZE_LARGE = \"90%\";\n  Drawer = __decorate([polyfill], Drawer);\n  return Drawer;\n}(AbstractPureComponent2);\n\nexport { Drawer };","map":{"version":3,"sources":["../../../../src/components/drawer/drawer.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __decorate, __extends } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { getPositionIgnoreAngles, isPositionHorizontal } from \"../../common/position\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon } from \"../icon/icon\";\nimport { Overlay } from \"../overlay/overlay\";\nvar Drawer = /** @class */ (function (_super) {\n    __extends(Drawer, _super);\n    function Drawer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleOpening = function (node) {\n            var _a, _b;\n            _this.lastActiveElementBeforeOpened = document.activeElement;\n            (_b = (_a = _this.props).onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        _this.handleClosed = function (node) {\n            var _a, _b;\n            if (_this.lastActiveElementBeforeOpened instanceof HTMLElement) {\n                _this.lastActiveElementBeforeOpened.focus();\n            }\n            (_b = (_a = _this.props).onClosed) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        return _this;\n    }\n    Drawer.prototype.render = function () {\n        var _a, _b;\n        var _c;\n        // eslint-disable-next-line deprecation/deprecation\n        var _d = this.props, size = _d.size, style = _d.style, position = _d.position, vertical = _d.vertical;\n        var realPosition = position ? getPositionIgnoreAngles(position) : undefined;\n        var classes = classNames(Classes.DRAWER, (_a = {},\n            _a[Classes.VERTICAL] = !realPosition && vertical,\n            _a[(_c = Classes.positionClass(realPosition)) !== null && _c !== void 0 ? _c : \"\"] = true,\n            _a), this.props.className);\n        var styleProp = size == null\n            ? style\n            : __assign(__assign({}, style), (_b = {}, _b[(realPosition ? isPositionHorizontal(realPosition) : vertical) ? \"height\" : \"width\"] = size, _b));\n        return (React.createElement(Overlay, __assign({}, this.props, { className: Classes.OVERLAY_CONTAINER, onOpening: this.handleOpening, onClosed: this.handleClosed }),\n            React.createElement(\"div\", { className: classes, style: styleProp },\n                this.maybeRenderHeader(),\n                this.props.children)));\n    };\n    Drawer.prototype.validateProps = function (props) {\n        if (props.title == null) {\n            if (props.icon != null) {\n                console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n            }\n            if (props.isCloseButtonShown != null) {\n                console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n            }\n        }\n        if (props.position != null) {\n            // eslint-disable-next-line deprecation/deprecation\n            if (props.vertical) {\n                console.warn(Errors.DRAWER_VERTICAL_IS_IGNORED);\n            }\n            if (props.position !== getPositionIgnoreAngles(props.position)) {\n                console.warn(Errors.DRAWER_ANGLE_POSITIONS_ARE_CASTED);\n            }\n        }\n    };\n    Drawer.prototype.maybeRenderCloseButton = function () {\n        // `isCloseButtonShown` can't be defaulted through default props because of props validation\n        // so this check actually defaults it to true (fails only if directly set to false)\n        if (this.props.isCloseButtonShown !== false) {\n            return (React.createElement(Button, { \"aria-label\": \"Close\", className: Classes.DIALOG_CLOSE_BUTTON, icon: React.createElement(Icon, { icon: \"small-cross\", iconSize: Icon.SIZE_LARGE }), minimal: true, onClick: this.props.onClose }));\n        }\n        else {\n            return null;\n        }\n    };\n    Drawer.prototype.maybeRenderHeader = function () {\n        var _a = this.props, icon = _a.icon, title = _a.title;\n        if (title == null) {\n            return null;\n        }\n        return (React.createElement(\"div\", { className: Classes.DRAWER_HEADER },\n            React.createElement(Icon, { icon: icon, iconSize: Icon.SIZE_LARGE }),\n            React.createElement(H4, null, title),\n            this.maybeRenderCloseButton()));\n    };\n    Drawer.displayName = DISPLAYNAME_PREFIX + \".Drawer\";\n    Drawer.defaultProps = {\n        canOutsideClickClose: true,\n        isOpen: false,\n        style: {},\n        vertical: false,\n    };\n    Drawer.SIZE_SMALL = \"360px\";\n    Drawer.SIZE_STANDARD = \"50%\";\n    Drawer.SIZE_LARGE = \"90%\";\n    Drawer = __decorate([\n        polyfill\n    ], Drawer);\n    return Drawer;\n}(AbstractPureComponent2));\nexport { Drawer };\n//# sourceMappingURL=drawer.js.map"]},"metadata":{},"sourceType":"module"}