{"ast":null,"code":"/*\n * Copyright 2020 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isFunction } from \"./functionUtils\";\nexport function elementIsOrContains(element, testElement) {\n  return element === testElement || element.contains(testElement);\n}\n/**\n * Throttle an event on an EventTarget by wrapping it in a\n * `requestAnimationFrame` call. Returns the event handler that was bound to\n * given eventName so you can clean up after yourself.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/scroll\n */\n\nexport function throttleEvent(target, eventName, newEventName) {\n  var throttledFunc = throttleImpl(function (event) {\n    target.dispatchEvent(new CustomEvent(newEventName, event));\n  });\n  target.addEventListener(eventName, throttledFunc);\n  return throttledFunc;\n}\n/**\n * Throttle a callback by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n *\n * @see https://www.html5rocks.com/en/tutorials/speed/animations/\n */\n\nexport function throttleReactEventCallback(callback, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var throttledFunc = throttleImpl(callback, function (event2) {\n    if (options.preventDefault) {\n      event2.preventDefault();\n    }\n  }, // prevent React from reclaiming the event object before we reference it\n  function (event2) {\n    return event2.persist();\n  });\n  return throttledFunc;\n}\n/**\n * Throttle a method by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nexport function throttle(method) {\n  return throttleImpl(method);\n} // eslint-disable-next-line @typescript-eslint/ban-types\n\nfunction throttleImpl(onAnimationFrameRequested, onBeforeIsRunningCheck, onAfterIsRunningCheck) {\n  var isRunning = false;\n\n  var func = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    } // don't use safeInvoke, because we might have more than its max number\n    // of typed params\n\n\n    if (isFunction(onBeforeIsRunningCheck)) {\n      onBeforeIsRunningCheck.apply(void 0, args);\n    }\n\n    if (isRunning) {\n      return;\n    }\n\n    isRunning = true;\n\n    if (isFunction(onAfterIsRunningCheck)) {\n      onAfterIsRunningCheck.apply(void 0, args);\n    }\n\n    requestAnimationFrame(function () {\n      onAnimationFrameRequested.apply(void 0, args);\n      isRunning = false;\n    });\n  };\n\n  return func;\n}","map":{"version":3,"sources":["../../../../src/common/utils/domUtils.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;AAcG;AAEH,SAAS,UAAT,QAA2B,iBAA3B;AAEA,OAAM,SAAU,mBAAV,CAA8B,OAA9B,EAAoD,WAApD,EAA4E;AAC9E,SAAO,OAAO,KAAK,WAAZ,IAA2B,OAAO,CAAC,QAAR,CAAiB,WAAjB,CAAlC;AACH;AAED;;;;;;AAMG;;AACH,OAAM,SAAU,aAAV,CAAwB,MAAxB,EAA6C,SAA7C,EAAgE,YAAhE,EAAoF;AACtF,MAAM,aAAa,GAAG,YAAY,CAAC,UAAC,KAAD,EAAa;AAC5C,IAAA,MAAM,CAAC,aAAP,CAAqB,IAAI,WAAJ,CAAgB,YAAhB,EAA8B,KAA9B,CAArB;AACH,GAFiC,CAAlC;AAGA,EAAA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,aAAnC;AACA,SAAO,aAAP;AACH;AAMD;;;;;AAKG;;AACH,OAAM,SAAU,0BAAV,CACF,QADE,EAEF,OAFE,EAEuC;AAAzC,MAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,EAAA;AAAyC;;AAEzC,MAAM,aAAa,GAAG,YAAY,CAC9B,QAD8B,EAE9B,UAAC,MAAD,EAAU;AACN,QAAI,OAAO,CAAC,cAAZ,EAA4B;AACxB,MAAA,MAAM,CAAC,cAAP;AACH;AACJ,GAN6B,EAO9B;AACA,YAAC,MAAD,EAAU;AAAK,WAAA,MAAM,CAAN,OAAA,EAAA;AAAgB,GARD,CAAlC;AAUA,SAAO,aAAP;AACH;AAED;;;AAGG;AACH;;AACA,OAAM,SAAU,QAAV,CAAuC,MAAvC,EAAgD;AAClD,SAAO,YAAY,CAAC,MAAD,CAAnB;AACH,C,CAED;;AACA,SAAS,YAAT,CACI,yBADJ,EAEI,sBAFJ,EAGI,qBAHJ,EAG6B;AAEzB,MAAI,SAAS,GAAG,KAAhB;;AACA,MAAM,IAAI,GAAG,YAAA;AAAC,QAAA,IAAA,GAAA,EAAA;;SAAA,IAAA,EAAA,GAAA,C,EAAA,EAAA,GAAA,SAAA,CAAA,M,EAAA,EAAA,E,EAAc;AAAd,MAAA,IAAA,CAAA,EAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;KAAD,CACT;AACA;;;AACA,QAAI,UAAU,CAAC,sBAAD,CAAd,EAAwC;AACpC,MAAA,sBAAsB,CAAA,KAAtB,CAAsB,KAAA,CAAtB,EAA0B,IAA1B;AACH;;AAED,QAAI,SAAJ,EAAe;AACX;AACH;;AACD,IAAA,SAAS,GAAG,IAAZ;;AAEA,QAAI,UAAU,CAAC,qBAAD,CAAd,EAAuC;AACnC,MAAA,qBAAqB,CAAA,KAArB,CAAqB,KAAA,CAArB,EAAyB,IAAzB;AACH;;AAED,IAAA,qBAAqB,CAAC,YAAA;AAClB,MAAA,yBAAyB,CAAA,KAAzB,CAAyB,KAAA,CAAzB,EAA6B,IAA7B;AACA,MAAA,SAAS,GAAG,KAAZ;AACH,KAHoB,CAArB;AAIH,GApBD;;AAqBA,SAAQ,IAAR;AACH","sourceRoot":"","sourcesContent":["/*\n * Copyright 2020 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isFunction } from \"./functionUtils\";\nexport function elementIsOrContains(element, testElement) {\n    return element === testElement || element.contains(testElement);\n}\n/**\n * Throttle an event on an EventTarget by wrapping it in a\n * `requestAnimationFrame` call. Returns the event handler that was bound to\n * given eventName so you can clean up after yourself.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/scroll\n */\nexport function throttleEvent(target, eventName, newEventName) {\n    var throttledFunc = throttleImpl(function (event) {\n        target.dispatchEvent(new CustomEvent(newEventName, event));\n    });\n    target.addEventListener(eventName, throttledFunc);\n    return throttledFunc;\n}\n/**\n * Throttle a callback by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n *\n * @see https://www.html5rocks.com/en/tutorials/speed/animations/\n */\nexport function throttleReactEventCallback(callback, options) {\n    if (options === void 0) { options = {}; }\n    var throttledFunc = throttleImpl(callback, function (event2) {\n        if (options.preventDefault) {\n            event2.preventDefault();\n        }\n    }, \n    // prevent React from reclaiming the event object before we reference it\n    function (event2) { return event2.persist(); });\n    return throttledFunc;\n}\n/**\n * Throttle a method by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function throttle(method) {\n    return throttleImpl(method);\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction throttleImpl(onAnimationFrameRequested, onBeforeIsRunningCheck, onAfterIsRunningCheck) {\n    var isRunning = false;\n    var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        // don't use safeInvoke, because we might have more than its max number\n        // of typed params\n        if (isFunction(onBeforeIsRunningCheck)) {\n            onBeforeIsRunningCheck.apply(void 0, args);\n        }\n        if (isRunning) {\n            return;\n        }\n        isRunning = true;\n        if (isFunction(onAfterIsRunningCheck)) {\n            onAfterIsRunningCheck.apply(void 0, args);\n        }\n        requestAnimationFrame(function () {\n            onAnimationFrameRequested.apply(void 0, args);\n            isRunning = false;\n        });\n    };\n    return func;\n}\n//# sourceMappingURL=domUtils.js.map"]},"metadata":{},"sourceType":"module"}