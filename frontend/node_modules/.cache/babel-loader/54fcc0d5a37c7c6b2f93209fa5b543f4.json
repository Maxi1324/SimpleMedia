{"ast":null,"code":"/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport * as Classes from \"../../common/classes\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { isFunction } from \"../../common/utils\";\n/** Detect if `React.createPortal()` API method does not exist. */\n\nvar cannotCreatePortal = !isFunction(ReactDOM.createPortal);\nvar REACT_CONTEXT_TYPES = {\n  blueprintPortalClassName: function (obj, key) {\n    if (obj[key] != null && typeof obj[key] !== \"string\") {\n      return new Error(Errors.PORTAL_CONTEXT_CLASS_NAME_STRING);\n    }\n\n    return undefined;\n  }\n};\n/**\n * This component detaches its contents and re-attaches them to document.body.\n * Use it when you need to circumvent DOM z-stacking (for dialogs, popovers, etc.).\n * Any class names passed to this element will be propagated to the new container element on document.body.\n */\n\nvar Portal =\n/** @class */\nfunction (_super) {\n  __extends(Portal, _super);\n\n  function Portal() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.context = {};\n    _this.state = {\n      hasMounted: false\n    };\n    _this.portalElement = null;\n    return _this;\n  }\n\n  Portal.prototype.render = function () {\n    // Only render `children` once this component has mounted in a browser environment, so they are\n    // immediately attached to the DOM tree and can do DOM things like measuring or `autoFocus`.\n    // See long comment on componentDidMount in https://reactjs.org/docs/portals.html#event-bubbling-through-portals\n    if (cannotCreatePortal || typeof document === \"undefined\" || !this.state.hasMounted || this.portalElement === null) {\n      return null;\n    } else {\n      return ReactDOM.createPortal(this.props.children, this.portalElement);\n    }\n  };\n\n  Portal.prototype.componentDidMount = function () {\n    if (!this.props.container) {\n      return;\n    }\n\n    this.portalElement = this.createContainerElement();\n    this.props.container.appendChild(this.portalElement);\n    /* eslint-disable-next-line react/no-did-mount-set-state */\n\n    this.setState({\n      hasMounted: true\n    }, this.props.onChildrenMount);\n\n    if (cannotCreatePortal) {\n      this.unstableRenderNoPortal();\n    }\n  };\n\n  Portal.prototype.componentDidUpdate = function (prevProps) {\n    // update className prop on portal DOM element\n    if (this.portalElement != null && prevProps.className !== this.props.className) {\n      if (prevProps.className !== undefined) {\n        this.portalElement.classList.remove(prevProps.className);\n      }\n\n      maybeAddClass(this.portalElement.classList, this.props.className);\n    }\n\n    if (cannotCreatePortal) {\n      this.unstableRenderNoPortal();\n    }\n  };\n\n  Portal.prototype.componentWillUnmount = function () {\n    if (this.portalElement != null) {\n      if (cannotCreatePortal) {\n        ReactDOM.unmountComponentAtNode(this.portalElement);\n      }\n\n      this.portalElement.remove();\n    }\n  };\n\n  Portal.prototype.createContainerElement = function () {\n    var container = document.createElement(\"div\");\n    container.classList.add(Classes.PORTAL);\n    maybeAddClass(container.classList, this.props.className);\n\n    if (this.context != null) {\n      maybeAddClass(container.classList, this.context.blueprintPortalClassName);\n    }\n\n    return container;\n  };\n\n  Portal.prototype.unstableRenderNoPortal = function () {\n    if (this.portalElement === null) {\n      return;\n    }\n\n    ReactDOM.unstable_renderSubtreeIntoContainer(\n    /* parentComponent */\n    this, React.createElement(\"div\", null, this.props.children), this.portalElement);\n  };\n\n  Portal.displayName = DISPLAYNAME_PREFIX + \".Portal\";\n  Portal.contextTypes = REACT_CONTEXT_TYPES;\n  Portal.defaultProps = {\n    container: typeof document !== \"undefined\" ? document.body : undefined\n  };\n  return Portal;\n}(React.Component);\n\nexport { Portal };\n\nfunction maybeAddClass(classList, className) {\n  if (className != null && className !== \"\") {\n    classList.add.apply(classList, className.split(\" \"));\n  }\n}","map":{"version":3,"sources":["../../../../src/components/portal/portal.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport * as Classes from \"../../common/classes\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { isFunction } from \"../../common/utils\";\n/** Detect if `React.createPortal()` API method does not exist. */\nvar cannotCreatePortal = !isFunction(ReactDOM.createPortal);\nvar REACT_CONTEXT_TYPES = {\n    blueprintPortalClassName: function (obj, key) {\n        if (obj[key] != null && typeof obj[key] !== \"string\") {\n            return new Error(Errors.PORTAL_CONTEXT_CLASS_NAME_STRING);\n        }\n        return undefined;\n    },\n};\n/**\n * This component detaches its contents and re-attaches them to document.body.\n * Use it when you need to circumvent DOM z-stacking (for dialogs, popovers, etc.).\n * Any class names passed to this element will be propagated to the new container element on document.body.\n */\nvar Portal = /** @class */ (function (_super) {\n    __extends(Portal, _super);\n    function Portal() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.context = {};\n        _this.state = { hasMounted: false };\n        _this.portalElement = null;\n        return _this;\n    }\n    Portal.prototype.render = function () {\n        // Only render `children` once this component has mounted in a browser environment, so they are\n        // immediately attached to the DOM tree and can do DOM things like measuring or `autoFocus`.\n        // See long comment on componentDidMount in https://reactjs.org/docs/portals.html#event-bubbling-through-portals\n        if (cannotCreatePortal ||\n            typeof document === \"undefined\" ||\n            !this.state.hasMounted ||\n            this.portalElement === null) {\n            return null;\n        }\n        else {\n            return ReactDOM.createPortal(this.props.children, this.portalElement);\n        }\n    };\n    Portal.prototype.componentDidMount = function () {\n        if (!this.props.container) {\n            return;\n        }\n        this.portalElement = this.createContainerElement();\n        this.props.container.appendChild(this.portalElement);\n        /* eslint-disable-next-line react/no-did-mount-set-state */\n        this.setState({ hasMounted: true }, this.props.onChildrenMount);\n        if (cannotCreatePortal) {\n            this.unstableRenderNoPortal();\n        }\n    };\n    Portal.prototype.componentDidUpdate = function (prevProps) {\n        // update className prop on portal DOM element\n        if (this.portalElement != null && prevProps.className !== this.props.className) {\n            if (prevProps.className !== undefined) {\n                this.portalElement.classList.remove(prevProps.className);\n            }\n            maybeAddClass(this.portalElement.classList, this.props.className);\n        }\n        if (cannotCreatePortal) {\n            this.unstableRenderNoPortal();\n        }\n    };\n    Portal.prototype.componentWillUnmount = function () {\n        if (this.portalElement != null) {\n            if (cannotCreatePortal) {\n                ReactDOM.unmountComponentAtNode(this.portalElement);\n            }\n            this.portalElement.remove();\n        }\n    };\n    Portal.prototype.createContainerElement = function () {\n        var container = document.createElement(\"div\");\n        container.classList.add(Classes.PORTAL);\n        maybeAddClass(container.classList, this.props.className);\n        if (this.context != null) {\n            maybeAddClass(container.classList, this.context.blueprintPortalClassName);\n        }\n        return container;\n    };\n    Portal.prototype.unstableRenderNoPortal = function () {\n        if (this.portalElement === null) {\n            return;\n        }\n        ReactDOM.unstable_renderSubtreeIntoContainer(\n        /* parentComponent */ this, React.createElement(\"div\", null, this.props.children), this.portalElement);\n    };\n    Portal.displayName = DISPLAYNAME_PREFIX + \".Portal\";\n    Portal.contextTypes = REACT_CONTEXT_TYPES;\n    Portal.defaultProps = {\n        container: typeof document !== \"undefined\" ? document.body : undefined,\n    };\n    return Portal;\n}(React.Component));\nexport { Portal };\nfunction maybeAddClass(classList, className) {\n    if (className != null && className !== \"\") {\n        classList.add.apply(classList, className.split(\" \"));\n    }\n}\n//# sourceMappingURL=portal.js.map"]},"metadata":{},"sourceType":"module"}